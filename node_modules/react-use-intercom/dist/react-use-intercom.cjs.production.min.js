"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react");function t(){return(t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var n="undefined"==typeof window,o=function(e){if(!n&&window.Intercom){for(var t=arguments.length,o=new Array(t>1?t-1:0),a=1;a<t;a++)o[a-1]=arguments[a];return window.Intercom.apply(null,[e].concat(o))}},a=e.createContext(void 0),r=function(e){return t({company_id:e.companyId,name:e.name,created_at:e.createdAt,plan:e.plan,monthly_spend:e.monthlySpend,user_count:e.userCount,size:e.size,website:e.website,industry:e.industry},e.customAttributes)},i=function(e){return{type:e.type,image_url:e.imageUrl}},u=function(e){return function e(t){return Object.keys(t).forEach((function(n){t[n]&&"object"==typeof t[n]?e(t[n]):void 0===t[n]&&delete t[n]})),t}(t({},{custom_launcher_selector:(n=e).customLauncherSelector,alignment:n.alignment,vertical_padding:n.verticalPadding,horizontal_padding:n.horizontalPadding,hide_default_launcher:n.hideDefaultLauncher,session_duration:n.sessionDuration,action_color:n.actionColor,background_color:n.backgroundColor},function(e){var n;return t({email:e.email,user_id:e.userId,created_at:e.createdAt,name:e.name,phone:e.phone,last_request_at:e.lastRequestAt,unsubscribed_from_emails:e.unsubscribedFromEmails,language_override:e.languageOverride,utm_campaign:e.utmCampaign,utm_content:e.utmContent,utm_medium:e.utmMedium,utm_source:e.utmSource,utm_term:e.utmTerm,avatar:e.avatar&&i(e.avatar),user_hash:e.userHash,company:e.company&&r(e.company),companies:null==(n=e.companies)?void 0:n.map(r)},e.customAttributes)}(e)));var n};exports.IntercomProvider=function(r){var i=r.appId,c=r.autoBoot,s=void 0!==c&&c,d=r.autoBootProps,l=r.children,m=r.onHide,f=r.onShow,p=r.onUnreadCountChange,h=r.shouldInitialize,w=void 0===h?!n:h,v=r.apiBase,g=r.initializeDelay,_=(function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)t.indexOf(n=r[o])>=0||(a[n]=e[n])}(r,["appId","autoBoot","autoBootProps","children","onHide","onShow","onUnreadCountChange","shouldInitialize","apiBase","initializeDelay"]),e.useRef(!1)),b=e.useRef(!1),y=e.useCallback((function(e){if((window.Intercom||w)&&!_.current){var n=t({app_id:i},v&&{api_base:v},e&&u(e));window.intercomSettings=n,o("boot",n),_.current=!0}}),[v,i,w]);n||!w||b.current||(function(e,t){void 0===t&&(t=0);var n=window,o=n.Intercom;if("function"==typeof o)o("reattach_activator"),o("update",n.intercomSettings);else{var a=document,r=function e(){e.c(arguments)};r.q=[],r.c=function(e){r.q.push(e)},n.Intercom=r;var i=function(){setTimeout((function(){var t=a.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://widget.intercom.io/widget/"+e;var n=a.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)}),t)};"complete"===document.readyState?i():n.attachEvent?n.attachEvent("onload",i):n.addEventListener("load",i,!1)}}(i,g),m&&o("onHide",m),f&&o("onShow",f),p&&o("onUnreadCountChange",p),s&&y(d),b.current=!0);var C=e.useCallback((function(e,t){if((window.Intercom||w)&&_.current)return t()}),[w]),k=e.useCallback((function(){_.current&&(o("shutdown"),delete window.intercomSettings,_.current=!1)}),[]),I=e.useCallback((function(){_.current&&(o("shutdown"),delete window.Intercom,delete window.intercomSettings,_.current=!1)}),[]),S=e.useCallback((function(){C("update",(function(){var e=(new Date).getTime();o("update",{last_requested_at:e})}))}),[C]),E=e.useCallback((function(e){C("update",(function(){if(e){var n=u(e);window.intercomSettings=t({},window.intercomSettings,n),o("update",n)}else S()}))}),[C,S]),M=e.useCallback((function(){C("hide",(function(){o("hide")}))}),[C]),A=e.useCallback((function(){C("show",(function(){return o("show")}))}),[C]),z=e.useCallback((function(){C("showMessages",(function(){o("showMessages")}))}),[C]),B=e.useCallback((function(e){C("showNewMessage",(function(){e?o("showNewMessage",e):o("showNewMessage")}))}),[C]),O=e.useCallback((function(){return C("getVisitorId",(function(){return o("getVisitorId")}))}),[C]),P=e.useCallback((function(e){C("startTour",(function(){o("startTour",e)}))}),[C]),j=e.useCallback((function(e,t){C("trackEvent",(function(){t?o("trackEvent",e,t):o("trackEvent",e)}))}),[C]),x=e.useCallback((function(e){return C("showArticle",(function(){o("showArticle",e)}))}),[C]),T=e.useMemo((function(){return{boot:y,shutdown:k,hardShutdown:I,update:E,hide:M,show:A,showMessages:z,showNewMessages:B,getVisitorId:O,startTour:P,trackEvent:j,showArticle:x}}),[y,k,I,E,M,A,z,B,O,P,j,x]);return e.createElement(a.Provider,{value:T},l)},exports.useIntercom=function(){return e.useContext(a)};
//# sourceMappingURL=react-use-intercom.cjs.production.min.js.map
